/**********************************************************************
 * BMP280Module.cpp
 * 
 * Implementation of the BMP280 module class.
 * 
 * Author: Cyril Marx
 * Created: September 2022
 **********************************************************************/

#include "BMP280Module.hpp"

BMP280Module::BMP280Module() :
temperature_(0),
pressure_(0),
altitude_(0)
{
  time_list_[0] = 5;
  time_list_[1] = 5;
  time_list_[2] = 5;
  setMaxSteps(3);
}

//-----------------------------------------------------------------------------------------------------------------
void BMP280Module::initModule()
{
  module_object_.begin(BMP280_ADDRESS_ALT);
}

//-----------------------------------------------------------------------------------------------------------------
int16_t BMP280Module::getTemperature()
{
  return temperature_;
}

//-----------------------------------------------------------------------------------------------------------------
uint16_t BMP280Module::getPressure()
{
  return pressure_;
}

//-----------------------------------------------------------------------------------------------------------------
uint16_t BMP280Module::getAltitude()
{
  return altitude_;
}

//-----------------------------------------------------------------------------------------------------------------
void BMP280Module::stepOne()
{
  temperature_ = module_object_.readTemperature();
}

//-----------------------------------------------------------------------------------------------------------------
void BMP280Module::stepTwo()
{
  pressure_ = module_object_.readPressure();
}

//-----------------------------------------------------------------------------------------------------------------
void BMP280Module::stepThree()
{
  altitude_ = module_object_.readAltitude();
}

//-----------------------------------------------------------------------------------------------------------------
void BMP280Module::stepFour()
{
  // Not used.
}
